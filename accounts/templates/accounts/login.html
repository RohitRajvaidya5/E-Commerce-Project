{% extends "base.html" %}
{% block content %}

<div class="max-w-md mx-auto mt-10 bg-base-100 text-base-content p-6 shadow rounded">

    <h2 class="text-2xl font-bold mb-4">Login</h2>

    <!-- Loader (invisible by default) -->
    <div id="loaderBox" class="flex flex-col items-center py-6 invisible">
        <span class="loading loading-spinner loading-lg"></span>
        <p class="mt-3 text-base">Logging you in...</p>
    </div>

    <!-- FORM -->
    <form id="loginForm" method="POST">
        {% csrf_token %}

        <label class="block mb-1 font-medium">Username</label>
        <input name="username" type="text"
               class="input input-bordered w-full mb-4"
               required>

        <label class="block mb-1 font-medium">Password</label>
        <input name="password" type="password"
               class="input input-bordered w-full mb-4"
               required>

        <button class="btn btn-primary w-full mt-3" type="submit">Login</button>
    </form>

    <p class="mt-3 text-center">
        Donâ€™t have an account?
        <a href="{% url 'register' %}" class="text-primary font-medium">
            Register
        </a>
    </p>

</div>

<!-- JS to show loader on submit -->
<script>
    const loginForm = document.getElementById('loginForm');
    const loader = document.getElementById('loaderBox');

    loginForm.addEventListener('submit', () => {
        loginForm.classList.add('invisible');     // hide form
        loader.classList.remove('invisible');     // show loader
    });
</script>

{% endblock %}
